<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<a href="">
    <div id="box">123</div>
</a>
<script>
   // 事件 ：
    // 事件行为： onclick  onmouseover onmousemove onmouseout  onmousedown  onmouseup  onload onscroll  onkeyup onkeydown onchange  onblur  onfocus oninput
    // ontouchstart ontouchmove  ontouchend;
    // addEventListener   removeEventListener
   /*function fn(e,a,b) {
       console.log(e);
       console.log(this);
   }
    box.addEventListener("click",function (e) {
        // this--> box;
        fn.call(this,e,1,2)
    },false);*/
    //box.removeEventListener("click",fn,false)
    // 三个参数完全一致，才可以移出；
    // attachEvent   detachEvent

    //
    /*box.onclick = function (e) {
        e = e || window.event;
        // e : 是一个对象数据类型的；
        // clientX  clientY  offsetX  offsetY  pageX  pageY target type stopPropagation  cancelBubble  preventDefault   returnValue
        //不兼容：e  pageX  pageY target stopPropagation  preventDefault
    }
    box1.onclick = function () {
        e = e || window.event;
    }*/

    // 事件传播
    // 事件的三个阶段：捕获 --> 目标阶段--> 冒泡阶段；
    // addEventListener
    // 捕获： 从外向内
    // 冒泡： 从内向外；
    // 事件委托：

    // 发布订阅模式
    // 订阅 发布  移出订阅
    // 订阅
   // 把事件的方法订阅到一个对象中；
   // 自定义事件；
   let obj ={};
    function on(obj,type,fn){
        if(!obj[type]){//
            obj[type]=[];
        }
        // 事件池
        let ary = obj[type];
        // 这个循环，检测这个函数是否订阅过；
        for(let i=0;i<ary.length;i++){
            if(ary[i]===fn){
                return;
            }
        }
        ary.push(fn);
    }
    // 让订阅的函数依次执行；
    function emit(obj,type){
        let ary = obj[type];
        for(let i=0;i<ary.length;i++){
            if(typeof ary[i]==="function"){
                ary[i]();
            }
        }
    }
    // 移出订阅的方法；
    function off(obj,type,fn){
        let ary = obj[type];
        for(let i=0;i<ary.length;i++){
            if(ary[i]===fn){
                ary[i]=null;
            }
        }
    }
</script>
</body>
</html>